(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(18),c=n.n(a),s=n(19),u=n(3),r=n(1),o=n(0),i=function(e){return Object(o.jsx)("input",{value:e.value,onChange:e.onChange})},d=function(e){return Object(o.jsxs)("div",{children:[e.text,": ",Object(o.jsx)("input",{value:e.value,onChange:e.onChange})]})},j=function(e){var t=e.onSubmit,n=e.values,a=e.onChanges;return Object(o.jsxs)("form",{onSubmit:t,children:[Object(o.jsx)(d,{value:n.nameInput,onChange:a.nameOnChange,text:"name"}),Object(o.jsx)(d,{value:n.numInput,onChange:a.numOnChange,text:"number"}),Object(o.jsx)("button",{type:"submit",children:"Add"})]})},l=function(e){return Object(o.jsx)("div",{children:e.persons.map((function(t){return Object(o.jsxs)("div",{children:[t.name," ",t.number," ",Object(o.jsx)("button",{onClick:function(){return e.deleteHandler(t.id)},children:"Delete"})]},t.id)}))})},m=function(e){return"rejected"===e.message.status?Object(o.jsx)("div",{className:"rejected",children:e.message.message}):"resolved"===e.message.status?Object(o.jsx)("div",{className:"resolved",children:e.message.message}):Object(o.jsx)("div",{})},b=n(5),f=n.n(b),h="/api/persons",O={getAll:function(){return f.a.get(h)},create:function(e){return f.a.post(h,e)},remove:function(e){return f.a.delete("".concat(h,"/").concat(e))},update:function(e,t){return f.a.put("".concat(h,"/").concat(e),t)}},g=(n(43),function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),d=Object(u.a)(c,2),b=d[0],f=d[1],h=Object(r.useState)(""),g=Object(u.a)(h,2),v=g[0],p=g[1],x=Object(r.useState)(""),C=Object(u.a)(x,2),S=C[0],w=C[1],k=Object(r.useState)({message:"",status:""}),I=Object(u.a)(k,2),y=I[0],A=I[1];Object(r.useEffect)((function(){O.getAll().then((function(e){a(e.data)}))}),[]);var D=function(){setTimeout((function(){A({status:"",message:""})}),5e3)},N=""===S?n:n.filter((function(e){return e.name.toLowerCase().includes(S)}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Filter"}),Object(o.jsx)(i,{value:S,onChange:function(e){w(e.target.value)}}),Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(m,{message:y}),Object(o.jsx)(j,{onSubmit:function(e){e.preventDefault();var t={name:b,number:v};if(n.some((function(e){return e.name===b}))){var c=n.find((function(e){return e.name===b}));window.confirm("".concat(c.name," has already been added to the list. Update number?"))&&O.update(c.id,t).then((function(e){a(n.map((function(t){return t.id!==c.id?t:e.data}))),A({status:"resolved",message:"".concat(c.name," updated")}),D(),f(""),p("")}))}else O.create(t).then((function(e){a([].concat(Object(s.a)(n),[e.data])),A({status:"resolved",message:"".concat(e.data.name," added")}),D(),f(""),p("")})).catch((function(e){A({status:"rejected",message:e.response.data.error})}))},values:{nameInput:b,numInput:v},onChanges:{nameOnChange:function(e){f(e.target.value)},numOnChange:function(e){p(e.target.value)}}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(l,{persons:N,deleteHandler:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&(O.remove(e).catch((function(c){A({status:"rejected",message:"".concat(t.name," has already been deleted")}),D(),a(n.filter((function(t){return e!==t.id})))})),a(n.filter((function(t){return e!==t.id}))))}})]})});c.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.edb3ae7c.chunk.js.map